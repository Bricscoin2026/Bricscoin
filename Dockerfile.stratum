# BricsCoin Stratum Server - Dockerfile
FROM python:3.11-slim

WORKDIR /app

# Install dependencies
COPY backend/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
RUN pip install httpx

# Copy stratum server
COPY backend/stratum_server.py .
COPY backend/.env .

ENV MONGO_URL=mongodb://mongo:27017
ENV DB_NAME=bricscoin
ENV STRATUM_PORT=3333
ENV STRATUM_HOST=0.0.0.0

EXPOSE 3333
EXPOSE 4444

CMD ["python", "stratum_server.py"]
